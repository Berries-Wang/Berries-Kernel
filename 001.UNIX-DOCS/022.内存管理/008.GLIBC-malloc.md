# malloc 函数分析
## 定义 : 000.GLIBC-2.40/malloc/malloc.c
```c
  strong_alias (__libc_malloc, __malloc) strong_alias (__libc_malloc, malloc)
```


## 涉及到的知识点
### break 指针
```c
   // 见000.GLIBC-2.40/misc/sbrk.c , 看图 [Run Linux Kernel (2nd Edition) Volume 1: Infrastructure.epub]#图4.26　ARM64进程地址空间布局
 
   // brk(void *addr)  : 003.TEST-SPACE/003.sbrk002.c
   #include <unistd.h>
   void *current_break = sbrk(0);  // 获取当前 break 指针
   if (brk(current_break + 4096) == -1) {  // 扩展堆 4KB
       perror("brk failed");
   }
   
   
   // sbrk(intptr_t increment): 相对调整 break 指针，增加 increment 字节（可为负数）。
   void *old_break = sbrk(4096);  // 扩展堆 4KB
   if (old_break == (void*)-1) {
       perror("sbrk failed");
   }
   
   // 观察break指针变化: 003.TEST-SPACE/002.sbrk001.c
   #include <stdio.h>
   #include <unistd.h>
   #include <stdlib.h>
   
   int main() {
       void *initial_break = sbrk(0);
       printf("%p\n", initial_break);
   
       void *p = sbrk(4096);  // glibc 可能触发 sbrk
       void *new_break = sbrk(0);
       printf("%p\n", new_break);
   
       free(p);
       return 0;
   }

```