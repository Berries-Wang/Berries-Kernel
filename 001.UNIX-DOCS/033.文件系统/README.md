# 文件系统(File System.FS)

## 简介
Linux 文件系统是操作系统管理和存储文件的一套机制。但 Linux 的精妙之处在于，它不仅用文件系统来存照片和文档，还用它来**“管理内核状态”**。

在 Linux 中，有一句名言：“万物皆文件”（Everything is a file）。
- 常规文件系统（如 Ext4, XFS）：这是你最熟悉的，它们把数据存在硬盘里。
- 虚拟文件系统（如 procfs, sysfs, cgroupfs）：这些文件并不存在于硬盘上，而是内核在内存中虚拟出来的。当你读取这些“文件”时，你其实是在读取内核的状态；当你修改这些“文件”时，你其实是在直接调整内核的参数。


### cgroup 与文件系统的关联
cgroup（Control Groups）是 Linux 内核的一个功能，用于限制、记录和隔离进程组使用的物理资源（如 CPU、内存、磁盘 I/O）。

它们通过一个名为 cgroupfs 的特殊文件系统(VFS.虚拟文件系统)来暴露接口。
核心关联点：
- 层级结构 = 目录树：cgroup 的资源分配是树状的。在文件系统中，这表现为层层嵌套的“文件夹”。创建一个新的子 cgroup，只需使用 mkdir 命令创建一个文件夹。
- 控制参数 = 文件：每个 cgroup 文件夹下都有一系列自动生成的文件（如 cpu.max, memory.limit_in_bytes）。
- 操作行为 = 读写文件：
  + 限制资源：通过 echo "100M" > memory.max 来限制内存。
  + 加入进程：通过 echo [PID] > cgroup.procs 将一个进程移入该控制组。

---

## 参考代码
|名称|类型|地址|说明|
|-|-|-|-|
|cgroup|vfs(虚拟文件系统)|000.LINUX-5.9/kernel/cgroup/|-|
|-|-|-|-|
|-|-|-|-|
|-|-|-|-|
|-|-|-|-|




## 参考资料
- [17-文件系统：基于inode的文件系统 [中山大学 操作系统原理]](./000.REFS/000.文件系统-1.pdf)
- [18-文件系统：使用文件系统 [中山大学 操作系统原理]](./000.REFS/001.文件系统-2.pdf)